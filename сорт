import os

def organize_files():
    # –æ—Ä–µ–¥–µ–ª—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
    categories = {
        '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è': ['.jpg', '.jpeg', '.png', '.gif', '.bmp'],
        '–î–æ–∫—É–º–µ–Ω—Ç—ã': ['.pdf', '.doc', '.docx', '.txt', '.rtf'],
        '–í–∏–¥–µ–æ': ['.mp4', '.avi', '.mkv', '.mov'],
        '–ú—É–∑—ã–∫–∞': ['.mp3', '.wav', '.flac'],
        '–ê—Ä—Ö–∏–≤—ã': ['.zip', '.rar', '.7z', '.tar', '.gz'],
        '–ü–∞–ø–∫–∏': [],
        'Unknown': []

    }


    # —Ç–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä—è
    current_dir = os.getcwd()
    print(f"üìÇ —Ä–∞–±–æ—Ç–∞ –≤ {current_dir}")









    


    # —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–æ–∫
    for category in categories.keys():
        # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥
        if not os.path.exists(category):
            # —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –ø–∞–ø–∫–∏ –µ—Å–ª–∏ –Ω–µ—Ç
            os.mkdir(category)
            print(f"—Å–æ–∑–¥–∞–Ω–∞ –ø–∞–ø–∫–∞: {category}")




                    
                                                                                                            



    # –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç—Ä–∏–∏
    # os.listdir(current_dir) - –≤—ã–∑—ã–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é 
    # –¥–ª—è —á—Ç–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞
    for filename in os.listdir(current_dir):
        # filename == os.path.basename(__file__) –≤ Python –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, 
        # —Å–æ–≤–ø–∞–¥–∞–µ—Ç –ª–∏ –∏–º—è —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∞–π–ª–∞ (–ø–æ–ª—É—á–µ–Ω–Ω–æ–µ —á–µ—Ä–µ–∑ __file__) 
        # —Å –∏–º–µ–Ω–µ–º, –∫–æ—Ç–æ—Ä–æ–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π filename
        if filename  == os.path.basename(__file__):
            continue

        # –ü–†–û–í–ï–†–ö–ê: –ï–°–õ–ò –≠–¢–û –ü–ê–ü–ö–ê - –û–ë–†–ê–ë–ê–¢–´–í–ê–ï–ú –û–¢–î–ï–õ–¨–ù–û
        if os.path.isdir(filename):
            # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–ø–∫–∏ –∏ —Å–∞–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            if filename in categories.keys() or filename.startswith('.'):
                continue
                
            category = '–ü–∞–ø–∫–∏'  # –ö—É–¥–∞ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å
            src_path = os.path.join(current_dir, filename)
            dst_path = os.path.join(current_dir, category, filename)
            
            try:
                os.rename(src_path, dst_path)
                print(f"üìÅ –ü–ê–ü–ö–ê {filename} -> {category}/")
                continue  # üëà –®–ê–ì 4: –ü–ï–†–ï–•–û–î–ò–ú –ö –°–õ–ï–î–£–Æ–©–ï–ú–£ –≠–õ–ï–ú–ï–ù–¢–£
            except Exception as e:
                print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –ø–∞–ø–∫–∏ {filename}: {e}")
                continue  # –î–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ - –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∫ —Ñ–∞–π–ª

    

        # –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
        # os.path.splitext - –∏–º—è –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
        # [1] - –≤—ã–±–æ—Ä —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
        # lower() - –Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä
        file_ext = os.path.splitext(filename)[1].lower()

        # –Ω–∞—Ö–æ–¥–∏–º –ø–æ–¥—Ö–ª–¥—è—â—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
        # –§–ª–∞–≥: —Ñ–∞–π–ª –µ—â—ë –Ω–µ –ø–µ—Ä–µ–º–µ—â—ë–Ω
        moved = False
        # category ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –∏—Ç–µ—Ä–∞—Ü–∏–∏ –ø–æ –∫–ª—é—á–∞–º —Å–ª–æ–≤–∞—Ä—è
        # extensions ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –∏—Ç–µ—Ä–∞—Ü–∏–∏ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—è–º —Å–ª–æ–≤–∞—Ä—è
        # categories ‚Äî —ç—Ç–æ –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –∫–æ—Ç–æ—Ä–∞—è —Ö—Ä–∞–Ω–∏—Ç —Å–ª–æ–≤–∞—Ä—å 
        # .items() ‚Äî —ç—Ç–æ –º–µ—Ç–æ–¥ —Å–ª–æ–≤–∞—Ä—è, 
        # –∫–æ—Ç–æ—Ä—ã–π –∏–∑–≤–ª–µ–∫–∞–µ—Ç  (–∫–ª—é—á, –∑–Ω–∞—á–µ–Ω–∏–µ)
        for category, Exception in categories.items():
            # file_ext ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º —Ñ–∞–π–ª–∞ (—Å—Ç—Ä–æ–∫–∞)
            # in ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
            # extensions ‚Äî —Å–ø–∏—Å–æ–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            if file_ext in Exception:
                # os.path.join() –≤ Python –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –æ–¥–∏–Ω
                #  –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—É—Ç–∏ –≤ –µ–¥–∏–Ω—ã–π
                src_path = os.path.join(current_dir, filename)
                dst_path = os.path.join(current_dir, category, filename)

                # –ü–µ—Ä–µ–º–µ—â–∞–µ–º —Ñ–∞–π–ª
                # try - –ù–∞—á–∞–ª–æ –±–ª–æ–∫–∞ —Å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–µ–π
                try:
                    # –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç —Ñ–∞–π–ª/–∫–∞—Ç–∞–ª–æ–≥ —Å –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –ø—É—Ç–∏ 
                    # src_path –Ω–∞ –Ω–æ–≤—ã–π –ø—É—Ç—å dst_path
                    os.rename(src_path, dst_path)
                    print(f"üìÅ {filename} -> {category}/")
                    moved = True
                    break
                # –õ–æ–≤–∏—Ç –õ–Æ–ë–£–Æ –æ—à–∏–±–∫—É –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ (–Ω–µ—Ç –ø—Ä–∞–≤, —Ñ–∞–π–ª –∑–∞–Ω—è—Ç, –¥–∏—Å–∫ –ø–æ–ª–æ–Ω –∏ —Ç.–¥.).
                except Exception as e:
                    print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ {filename}: {e}")
        
        #
        if not moved:
            category = 'Unknown'
            src_path = os.path.join(current_dir, filename)
            dst_path = os.path.join(current_dir, category, filename)
            
            try:
                # –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫—É Unknown –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç (–Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞)
                if not os.path.exists(category):
                    os.mkdir(category)
                os.rename(src_path, dst_path)
                print(f"‚ùì {filename} -> Unknown/")
                moved = True
            except Exception as e:
                print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –≤ Unknown {filename}: {e}")

    

    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ —É–¥–∞–ª—è–µ–º –ø—É—Å—Ç—ã–µ —Å–ª—É–∂–µ–±–Ω—ã–µ –ø–∞–ø–∫–∏
    for folder_name in ['–ü–∞–ø–∫–∏', 'Unknown']:
        folder_path = os.path.join(current_dir, folder_name)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø–∞–ø–∫–∞
        if os.path.exists(folder_path) and os.path.isdir(folder_path):
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—É—Å—Ç–∞—è –ª–∏ –æ–Ω–∞ (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Å–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã .DS_Store –∏ .gitkeep)
            contents = [f for f in os.listdir(folder_path) 
                       if not f.startswith('.') and f != 'desktop.ini']
            
            if not contents:  # –ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç–æ–π
                try:
                    os.rmdir(folder_path)
                    print(f"üßπ –£–¥–∞–ª–µ–Ω–∞ –ø—É—Å—Ç–∞—è –ø–∞–ø–∫–∞: {folder_name}")
                except Exception as e:
                    print(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å {folder_name}: {e}")



















    print("\n‚úÖ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")

# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã
if __name__ == "__main__":
    organize_files()
